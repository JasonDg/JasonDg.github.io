<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Array.sort() in Firefox can use boolean values for judgment | JasonDG</title><meta name=keywords content="Array,sort,Firefox"><meta name=description content="Once I was debugging, I found that in Firefox Array.sort() can take boolean values in addition to number values. However, in Node.js Array.sort() only supports number values. Although it didn&rsquo;t cause bugs, I&rsquo;m curious about the difference.
Difference between JS engines Here are some tests:
 Firefox  const arr = [{num:1}, {num:3}, {num:2}] const numSorted = arr.sort((a, b) => a.num - b.num) console.log(numSorted) > Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }] const arr = [{num:1}, {num:3}, {num:2}] const boolSorted = arr."><meta name=author content><link rel=canonical href=https://jasondg.github.io/en/posts/firefox.sort.by.boolean/><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://jasondg.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jasondg.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jasondg.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jasondg.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jasondg.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://jasondg.github.io/posts/firefox.sort.by.boolean/><link rel=alternate hreflang=en href=https://jasondg.github.io/en/posts/firefox.sort.by.boolean/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Array.sort() in Firefox can use boolean values for judgment"><meta property="og:description" content="Once I was debugging, I found that in Firefox Array.sort() can take boolean values in addition to number values. However, in Node.js Array.sort() only supports number values. Although it didn&rsquo;t cause bugs, I&rsquo;m curious about the difference.
Difference between JS engines Here are some tests:
 Firefox  const arr = [{num:1}, {num:3}, {num:2}] const numSorted = arr.sort((a, b) => a.num - b.num) console.log(numSorted) > Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }] const arr = [{num:1}, {num:3}, {num:2}] const boolSorted = arr."><meta property="og:type" content="article"><meta property="og:url" content="https://jasondg.github.io/en/posts/firefox.sort.by.boolean/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-03T20:23:28+08:00"><meta property="article:modified_time" content="2022-04-03T21:01:30+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Array.sort() in Firefox can use boolean values for judgment"><meta name=twitter:description content="Once I was debugging, I found that in Firefox Array.sort() can take boolean values in addition to number values. However, in Node.js Array.sort() only supports number values. Although it didn&rsquo;t cause bugs, I&rsquo;m curious about the difference.
Difference between JS engines Here are some tests:
 Firefox  const arr = [{num:1}, {num:3}, {num:2}] const numSorted = arr.sort((a, b) => a.num - b.num) console.log(numSorted) > Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }] const arr = [{num:1}, {num:3}, {num:2}] const boolSorted = arr."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jasondg.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"Array.sort() in Firefox can use boolean values for judgment","item":"https://jasondg.github.io/en/posts/firefox.sort.by.boolean/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Array.sort() in Firefox can use boolean values for judgment","name":"Array.sort() in Firefox can use boolean values for judgment","description":"Once I was debugging, I found that in Firefox Array.sort() can take boolean values in addition to number values. However, in Node.js Array.sort() only supports number values. Although it didn\u0026rsquo;t cause bugs, I\u0026rsquo;m curious about the difference.\nDifference between JS engines Here are some tests:\n Firefox  const arr = [{num:1}, {num:3}, {num:2}] const numSorted = arr.sort((a, b) =\u0026gt; a.num - b.num) console.log(numSorted) \u0026gt; Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }] const arr = [{num:1}, {num:3}, {num:2}] const boolSorted = arr.","keywords":["Array","sort","Firefox"],"articleBody":"Once I was debugging, I found that in Firefox Array.sort() can take boolean values in addition to number values. However, in Node.js Array.sort() only supports number values. Although it didn‚Äôt cause bugs, I‚Äôm curious about the difference.\nDifference between JS engines Here are some tests:\n Firefox  const arr = [{num:1}, {num:3}, {num:2}] const numSorted = arr.sort((a, b) = a.num - b.num) console.log(numSorted)  Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }] const arr = [{num:1}, {num:3}, {num:2}] const boolSorted = arr.sort((a, b) = a.num  b.num) console.log(boolSorted)  Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }]  Node.js  const arr = [{num:1}, {num:3}, {num:2}] const sorted = arr.sort((a, b) = a.num  b.num) console.log(sorted)  [ { num: 1 }, { num: 3 }, { num: 2 } ]  Deno  const arr = [{num:1}, {num:3}, {num:2}] const sorted = arr.sort((a, b) = a.num  b.num) console.log(sorted)  [ { num: 1 }, { num: 3 }, { num: 2 } ] It turns out that in Node.js and Deno (both use V8), Array.sort() takes only numbers. While in Firefox, Array.sort() can take both.\nArray.sort() in TypeScript In TypeScript, Array.sort() is\n(method) Array.sort(compareFn?: ((a: T, b: T) = number) | undefined): T[] Try to use boolean values in Array.sort(), but Typescript throws error:\nArgument of type '(a: { num: number; }, b: { num: number; }) = boolean' is not assignable to parameter of type '(a: { num: number; }, b: { num: number; }) = number'. Type 'boolean' is not assignable to type 'number'.ts(2345) Array.sort() in MDN and ECMA Let‚Äôs check out the document on MDN1, it says\n So, the compare function has the following form:\nfunction compare(a, b) { if (a is less than b by some ordering criterion) { return -1; } if (a is greater than b by the ordering criterion) { return 1; } // a must be equal to b return 0; }  The document doesn‚Äôt indicate the sort() can take boolean values. Continue to check out the ECMA standard2, which says\n  If x and y are both undefined, return +0ùîΩ. If x is undefined, return 1ùîΩ. If y is undefined, return -1ùîΩ. If comparefn is not undefined, then  Let v be ? ToNumber(? Call(comparefn, undefined, ¬´ x, y ¬ª)). If v is NaN, return +0ùîΩ. Return v.   Let xString be ? ToString(x). Let yString be ? ToString(y). Let xSmaller be ! IsLessThan(xString, yString, true). If xSmaller is true, return -1ùîΩ. Let ySmaller be ! IsLessThan(yString, xString, true). If ySmaller is true, return 1ùîΩ. Return +0ùîΩ.   It also doesn‚Äôt point out the sort() can take boolean values.\nSummary Array.sort() in Firefox can take boolean values, but there is no relevant description in documents. It may just be an implementation difference that probably not causing bugs.\n  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort¬†‚Ü©Ô∏é\n https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.sort¬†‚Ü©Ô∏é\n   ","wordCount":"477","inLanguage":"en","datePublished":"2022-04-03T20:23:28+08:00","dateModified":"2022-04-03T21:01:30+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://jasondg.github.io/en/posts/firefox.sort.by.boolean/"},"publisher":{"@type":"Organization","name":"JasonDG","logo":{"@type":"ImageObject","url":"https://jasondg.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jasondg.github.io/en/ accesskey=h title="JasonDG (Alt + H)">JasonDG</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://jasondg.github.io/ title=‰∏≠Êñá aria-label=‰∏≠Êñá>‰∏≠Êñá</a></li></ul></span></div><ul id=menu><li><a href=https://jasondg.github.io/en/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://jasondg.github.io/en/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://jasondg.github.io/en/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://jasondg.github.io/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Array.sort() in Firefox can use boolean values for judgment</h1><div class=post-meta><span title="2022-04-03 20:23:28 +0800 +0800">April 3, 2022</span>&nbsp;¬∑&nbsp;3 min&nbsp;|&nbsp;<ul class=i18n_list>Translations:<li><a href=https://jasondg.github.io/posts/firefox.sort.by.boolean/>‰∏≠Êñá</a></li></ul></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#difference-between-js-engines aria-label="Difference between JS engines">Difference between JS engines</a></li><li><a href=#arraysort-in-typescript aria-label="Array.sort() in TypeScript">Array.sort() in TypeScript</a></li><li><a href=#arraysort-in-mdn-and-ecma aria-label="Array.sort() in MDN and ECMA">Array.sort() in MDN and ECMA</a></li><li><a href=#summary aria-label=Summary>Summary</a></li></ul></div></details></div><div class=post-content><p>Once I was debugging, I found that in Firefox <code>Array.sort()</code> can take boolean values in addition to number values. However, in Node.js <code>Array.sort()</code> only supports number values.
Although it didn&rsquo;t cause bugs, I&rsquo;m curious about the difference.</p><h1 id=difference-between-js-engines>Difference between JS engines<a hidden class=anchor aria-hidden=true href=#difference-between-js-engines>#</a></h1><p>Here are some tests:</p><ul><li>Firefox</li></ul><pre tabindex=0><code>const arr = [{num:1}, {num:3}, {num:2}]
const numSorted = arr.sort((a, b) =&gt; a.num - b.num)
console.log(numSorted)

&gt; Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }]
</code></pre><pre tabindex=0><code>const arr = [{num:1}, {num:3}, {num:2}]
const boolSorted = arr.sort((a, b) =&gt; a.num &gt; b.num)
console.log(boolSorted)

&gt; Array [Object { num: 1 }, Object { num: 2 }, Object { num: 3 }]
</code></pre><ul><li>Node.js</li></ul><pre tabindex=0><code>const arr = [{num:1}, {num:3}, {num:2}]
const sorted = arr.sort((a, b) =&gt; a.num &gt; b.num)
console.log(sorted)

&gt; [ { num: 1 }, { num: 3 }, { num: 2 } ]
</code></pre><ul><li>Deno</li></ul><pre tabindex=0><code>const arr = [{num:1}, {num:3}, {num:2}]
const sorted = arr.sort((a, b) =&gt; a.num &gt; b.num)
console.log(sorted)

&gt; [ { num: 1 }, { num: 3 }, { num: 2 } ]
</code></pre><p>It turns out that in Node.js and Deno (both use V8), <code>Array.sort()</code> takes only numbers. While in Firefox, <code>Array.sort()</code> can take both.</p><h1 id=arraysort-in-typescript>Array.sort() in TypeScript<a hidden class=anchor aria-hidden=true href=#arraysort-in-typescript>#</a></h1><p>In TypeScript, <code>Array.sort()</code> is</p><pre tabindex=0><code>(method) Array&lt;T&gt;.sort(compareFn?: ((a: T, b: T) =&gt; number) | undefined): T[]
</code></pre><p>Try to use boolean values in <code>Array.sort()</code>, but Typescript throws error:</p><pre tabindex=0><code>Argument of type &#39;(a: { num: number; }, b: { num: number; }) =&gt; boolean&#39; is not assignable to parameter of type &#39;(a: { num: number; }, b: { num: number; }) =&gt; number&#39;.
  Type &#39;boolean&#39; is not assignable to type &#39;number&#39;.ts(2345)
</code></pre><h1 id=arraysort-in-mdn-and-ecma>Array.sort() in MDN and ECMA<a hidden class=anchor aria-hidden=true href=#arraysort-in-mdn-and-ecma>#</a></h1><p>Let&rsquo;s check out the document on MDN<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, it says</p><blockquote><p>So, the compare function has the following form:</p><pre tabindex=0><code>function compare(a, b) {
 if (a is less than b by some ordering criterion) {
   return -1;
 }
 if (a is greater than b by the ordering criterion) {
   return 1;
 }
 // a must be equal to b
 return 0;
}
</code></pre></blockquote><p>The <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#description>document</a> doesn&rsquo;t indicate the <code>sort()</code> can take boolean values.
Continue to check out the ECMA standard<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>, which says</p><blockquote><ol><li>If x and y are both undefined, return +0ùîΩ.</li><li>If x is undefined, return 1ùîΩ.</li><li>If y is undefined, return -1ùîΩ.</li><li>If comparefn is not undefined, then<ul><li>Let v be ? ToNumber(? Call(comparefn, undefined, ¬´ x, y ¬ª)).</li><li>If v is NaN, return +0ùîΩ.</li><li>Return v.</li></ul></li><li>Let xString be ? ToString(x).</li><li>Let yString be ? ToString(y).</li><li>Let xSmaller be ! IsLessThan(xString, yString, true).</li><li>If xSmaller is true, return -1ùîΩ.</li><li>Let ySmaller be ! IsLessThan(yString, xString, true).</li><li>If ySmaller is true, return 1ùîΩ.</li><li>Return +0ùîΩ.</li></ol></blockquote><p><a href=https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.sort>It</a> also doesn&rsquo;t point out the <code>sort()</code> can take boolean values.</p><h1 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h1><p><code>Array.sort()</code> in Firefox can take boolean values, but there is no relevant description in documents. It may just be an implementation difference that probably not causing bugs.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort>https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.sort>https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.sort</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://jasondg.github.io/en/tags/array/>Array</a></li><li><a href=https://jasondg.github.io/en/tags/sort/>sort</a></li><li><a href=https://jasondg.github.io/en/tags/firefox/>Firefox</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://jasondg.github.io/en/>JasonDG</a></span>
&bull;
<span>Licensed under <a href=http://creativecommons.org/licenses/by-sa/4.0 target=_blank>CC BY-SA 4.0</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>